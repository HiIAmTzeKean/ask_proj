{% extends 'base.html' %}

{% block title %}Grade Performance{% endblock %}

{% block content %}
<h2>Grade {{ studentRecord.name }}</h2>

<form method="POST" action="{{ url_for('performance.performanceGradePerformance', student_id=studentRecord.id) }}">
{{ form.hidden_tag() }}
<table class="table">
  <tbody>
    {{ form.errors.items() }}
    <tr>
      <th scope="row">{{ form.lesson_id.label(class="col-form-label") }}</th>
      <td colspan="2">{{ form.lesson_id(class="form-control", value="{{ request.form['lesson_id'] }}") }}</td>
    </tr>
    <tr>
      <th scope="row">{{ form.technique.label(class="col-form-label") }}</th>
      <td colspan="2">{{ form.technique(class="form-control") }}</td>
    </tr>
    <tr>
      <th scope="row">{{ form.ukemi.label(class="col-form-label") }}</th>
      <td colspan="2">{{ form.ukemi(class="form-control") }}</td>
    </tr>
    <tr>
      <th scope="row">{{ form.discipline.label(class="col-form-label") }}</th>
      <td colspan="2">{{ form.discipline(class="form-control") }}</td>
    </tr>
    <tr>
      <th scope="row">{{ form.coordination.label(class="col-form-label") }}</th>
      <td colspan="2">{{ form.coordination(class="form-control") }}</td>
    </tr>
    <tr>
      <th scope="row">{{ form.knowledge.label(class="col-form-label") }}</th>
      <td colspan="2">{{ form.knowledge(class="form-control") }}</td>
    </tr>
    <tr>
      <th scope="row">{{ form.spirit.label(class="col-form-label") }}</th>
      <td colspan="2">{{ form.spirit(class="form-control") }}</td>
    </tr>
    <tr>
      <td><a href="{{ url_for('performance.performanceViewer') }}" class="btn btn-danger">Back</a></td>
      <td>{{ form.submit(class="btn btn-success") }}</td>
    </tr>
  </tbody>
</table>
</form>
{% endblock %}

{% block scripts %}
<script>
  $(document).ready(function () {
      $(document).on('click', '.lesson_id', function () {
          var csrf_token = "{{ csrf_token() }}";
          var student_id = $(this).attr('student_id');
          var lesson_id = $(this).attr('lesson_id');

          $.ajax({
              url: "{{ url_for('performance.performanceGetPastPerformance')}}",
              type: "POST",
              headers: { "X-CSRFToken": csrf_token, },
              data: { student_id: student_id, lesson_id: lesson_id },
              success: function (data) {
                  $('#section' + student_id).fadeOut(100).fadeIn(100)
                  $('#section' + student_id).html(data)
              }
          });
      });
  })

  function updateForm(val) {
  }
</script>
{% endblock %}

